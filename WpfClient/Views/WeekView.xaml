<UserControl x:Class="WpfClient.Views.WeekView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid Margin="8">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- NAV -->
        <StackPanel Orientation="Horizontal" Grid.Row="0" HorizontalAlignment="Center" Margin="0,0,0,6">
            <Button Width="90" Margin="4,0" Content="Teraz"
                    Command="{Binding DataContext.GoNowCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
            <Button Width="90" Margin="4,0" Content="Tydzień"
                    Command="{Binding DataContext.GoWeekCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
            <Button Width="90" Margin="4,0" Content="Ustawienia"
                    Command="{Binding DataContext.GoSettingsCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
        </StackPanel>

        <!-- Days selector -->
        <Border Grid.Row="1" Padding="6" CornerRadius="8" BorderThickness="1" BorderBrush="Gray" Margin="0,0,0,6">
            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled">
                <ItemsControl ItemsSource="{Binding Days}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Button Margin="4,0" Padding="8,4"
                                    Content="{Binding LocalDate, StringFormat={}{0:dd.MM}}"
                                    Command="{Binding DataContext.SelectDayCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                    CommandParameter="{Binding}"/>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Border>

        <!-- Selected day details -->
        <Border Grid.Row="2" Padding="8" CornerRadius="8" BorderThickness="1" BorderBrush="Gray">
            <StackPanel>
                <TextBlock FontSize="14" FontWeight="Bold"
                           Text="{Binding SelectedDay.LocalDate, StringFormat=Dzień: {0:yyyy-MM-dd}}"/>

                <TextBlock Margin="0,6,0,0" Text="{Binding SelectedDay.MoonPhase, StringFormat=Faza: {0}}"/>
                <TextBlock Text="{Binding SelectedDay.MoonIlluminationPercentage, StringFormat=Oświetlenie: {0:N1}%}"/>
                <TextBlock Text="{Binding SelectedDay.DayLength, StringFormat=Długość dnia: {0}}"/>
                <TextBlock Text="{Binding SelectedDay.EveningAstronomicalTwilightBegin, StringFormat=test: {0}}"/>

                <TextBlock Margin="0,6,0,0" Opacity="0.7" TextWrapping="Wrap"
                           Text="Tu dołożysz resztę: twilight begin/end, alt/azimuth, itp."/>
            </StackPanel>
        </Border>

        <!-- Refresh -->
        <DockPanel Grid.Row="3" Margin="0,6,0,0">
            <TextBlock DockPanel.Dock="Left" VerticalAlignment="Center" Text="{Binding Status}" Opacity="0.8"/>
            <Button DockPanel.Dock="Right" Width="120" Content="Odśwież tydzień" Command="{Binding RefreshCommand}"/>
        </DockPanel>
    </Grid>
</UserControl>